<!DOCTYPE html><html lang="en-us"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Stripe Plugin - Chimpino</title><meta name="description" content="Stripe Plugin will teach your Mautic to listen for payment events and react with campaign events. Help your team to automate payment processes and improve your customer experience at the same time. Forget about click-through rate or open rate. Payment rate is what really matters!&hellip;"><meta name="generator" content="Publii Open-Source CMS for Static Site"><link rel="canonical" href="https://chimpino.com/stripe-plugin/"><link rel="alternate" type="application/atom+xml" href="https://chimpino.com/feed.xml"><link rel="alternate" type="application/json" href="https://chimpino.com/feed.json"><meta property="og:title" content="Stripe Plugin"><meta property="og:image" content="https://chimpino.com/media/website/CHIMPINO-png-cerna.png"><meta property="og:image:width" content="1485"><meta property="og:image:height" content="1217"><meta property="og:site_name" content="Chimpino"><meta property="og:description" content="Stripe Plugin will teach your Mautic to listen for payment events and react with campaign events. Help your team to automate payment processes and improve your customer experience at the same time. Forget about click-through rate or open rate. Payment rate is what really matters!&hellip;"><meta property="og:url" content="https://chimpino.com/stripe-plugin/"><meta property="og:type" content="article"><link rel="shortcut icon" href="https://chimpino.com/media/website/favicon.png" type="image/x-icon"><link rel="stylesheet" href="https://chimpino.com/assets/css/style.css?v=eeab788adf56d8dc9f51d65fd15c32e8"><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https://chimpino.com/stripe-plugin/"},"headline":"Stripe Plugin","datePublished":"2023-09-19T19:04","dateModified":"2023-11-19T10:30","image":{"@type":"ImageObject","url":"https://chimpino.com/media/website/CHIMPINO-png-cerna.png","height":1217,"width":1485},"description":"Stripe Plugin will teach your Mautic to listen for payment events and react with campaign events. Help your team to automate payment processes and improve your customer experience at the same time. Forget about click-through rate or open rate. Payment rate is what really matters!&hellip;","author":{"@type":"Person","name":"Jan Linhart","url":"https://chimpino.com/authors/jan-linhart/"},"publisher":{"@type":"Organization","name":"Jan Linhart","logo":{"@type":"ImageObject","url":"https://chimpino.com/media/website/CHIMPINO-png-cerna.png","height":1217,"width":1485}}}</script><noscript><style>img[loading] {
                    opacity: 1;
                }</style></noscript></head><body><script>function activateTracking() {
            (function (w, d, t, u, n, a, m) {
                w['MauticTrackingObject'] = n;
                w[n] = w[n] || function () { (w[n].q = w[n].q || []).push(arguments) }, a = d.createElement(t),
                    m = d.getElementsByTagName(t)[0]; a.async = 1; a.src = u; m.parentNode.insertBefore(a, m)
            })(window, document, 'script', 'https://m.chimpino.com/mtc.js', 'mt');
            mt('send', 'pageview');
        }</script><div class="site-container"><header class="top" id="js-header"><a class="logo" href="https://chimpino.com/"><img src="https://chimpino.com/media/website/CHIMPINO-png-cerna.png" alt="Chimpino" width="1485" height="1217"></a><nav class="navbar js-navbar"><button class="navbar__toggle js-toggle" aria-label="Menu" aria-haspopup="true" aria-expanded="false"><span class="navbar__toggle-box"><span class="navbar__toggle-inner">Menu</span></span></button><ul class="navbar__menu"><li><a href="https://chimpino.com/" target="_self">Home</a></li><li><a href="https://chimpino.com/ai-plugin/" target="_self">AI Plugin</a></li><li class="active"><a href="https://chimpino.com/stripe-plugin/" target="_self">Stripe Plugin</a></li><li><a href="https://chimpino.com/themes/" target="_self">Themes</a></li><li><a href="https://chimpino.com/tags/blog/" target="_self">Blog</a></li><li class="has-submenu"><a href="https://chimpino.com/contacts/" target="_self" aria-haspopup="true">Contacts</a><ul class="navbar__submenu level-2" aria-hidden="true"><li><a href="https://chimpino.com/about-us/" title="About Us" target="_blank">About US</a></li><li><a href="https://chimpino.com/terms/" title="Terms" target="_self">Terms</a></li><li><a href="https://chimpino.com/contacts/" target="_self">Contact Us</a></li></ul></li></ul></nav></header><main><article class="post"><div class="hero"><header class="hero__content"><div class="wrapper"><div class="post__meta"><time datetime="2023-09-19T19:04">September 19, 2023</time></div><h1>Stripe Plugin</h1></div></header></div><div class="wrapper post__entry"><p class="align-center"></p><div class="post__iframe"><iframe loading="lazy" width="560" height="315" src="https://www.youtube-nocookie.com/embed/9DXzWDbdDUE?si=Z_m8avAdC1A8iOeE" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen="allowfullscreen"></iframe></div> <p></p><p>Stripe Plugin will teach your Mautic to listen for payment events and react with campaign events. Help your team to automate payment processes and improve your customer experience at the same time.</p><blockquote><p>Forget about click-through rate or open rate. <strong>Payment rate</strong> is what really matters!</p></blockquote><h2>Features</h2><h4>Magic segments</h4><p>Segment filters seem like a good idea at first. But they have serious drawbacks.</p><p>The main is that contacts will get to the segment only after your cron job runs. So every 10 minutes or so. That's way too slow! Your customers expect <strong>faster reactions</strong>.</p><p><em>Another is, ask your server admin how much does it cost to rebuild each and every segment every 10 minutes. It's not cheap.</em> 🤫</p><p>The magic is quite simple, really. When you install this plugin, it will create a new segment for each Stripe event. And every time Stripe event happens, it will add the contact to the right segment. Fast, cheap, simple.</p><p>And this simple magic allows you to run <strong>repeatable campaigns</strong>!</p><h4>Segment filters</h4><p>That being said, if you need a segment of all <strong>Stripe customers</strong>, we have you covered. There is a segment filter for that. It will give you all contacts that have a relation to a Stripe Customer.</p><p>Tip: Stripe Customer doesn't have to be only a contact who paid for something. It could be a someone who filled in the checkout form but the payment didn't go through. I see the 💡 that came up in your marketer mind. I smell abandoned card scenario in the air! More on that later.</p><h4>Landing page tokens</h4><p>Stripe gives you a short HTML code to embed <strong>pricing tables</strong> or <strong>pay buttons</strong> to Mautic Landing Pages. We've tried that, doesn't work. The editor will strip parts of the HTML. We've got you covered. This plugin comes with special tokens for pricing tables and buttons. Details in the docs.</p><h4>Email tokens</h4><p>Stripe already allows you to add a link to a <strong>subscription management</strong> for your customers. It allows them to insert their email address and cancel or upgrade or downgrade their subscription. It's unique to your Stripe account. So there is no need for a token. It works out of the box.</p><p>What we added a token for is the <strong>invoice link</strong>. Stripe generates an invoice for every payment. The token will find the latest invoice link in the Stripe events and send replace the token with it.</p><p>Wait, wait what about the <strong>digital asset download link</strong>? That's a core Mautic feature, don't worry.</p><p>There is one more thing that we didn't have to implement. The <strong>Stripe payment button works in the email</strong> already. It's just a link. You can send your contact to the payment gate directly from the email content. And track it with Mautic. Sweet!</p><h4>Campaign conditions</h4><p>Right, the <strong>abandoned cart</strong> type of workflow. There is a campaign condition that allows you to decide whether a contact went through one type of event but not another. So if you check if the "Customer Created" event exists, wait a day and check if the "Invoice Paid" event does not exist, you can send a message (SMS, email) to the contact asking what's wrong.</p><p>Once you have more than 1 product, you may want to create <strong>different workflows for different products</strong>. We have a campaign condition for just that!</p><h4>Security</h4><p>We've got you covered. Stripe sends the events to a public endpoint that the Stripe plugin configures. So some comedian could start sending similar events there. Don't worry, Stripe is signing each event message with secret key. You have to insert the secret key to the plugin configuration in order to be able to accept the messages. The plugin will reject all event messages that are not correctly signed.</p><h2>Pricing</h2><p><script async="" src="https://js.stripe.com/v3/pricing-table.js"></script><stripe-pricing-table pricing-table-id="prctbl_1OChTlDe6Bz3HFJoRcBk9foN" publishable-key="pk_live_51NFhPoDe6Bz3HFJoBZkdv4NpV6hzKqD9rnSHtNOuh65VyduCcPENh2joNvfmV8Mr2AdxdzZZ3ueeAsikeuTwYT9D00OLPZzyaO"></stripe-pricing-table></p><p> </p><h2>Documentation</h2><div id="instalation" class="container"><h3>Installation</h3><p>Once you become our member, you receive an email with a link to download the latest version of the Stripe bundle. It will be a zip package. Here is how you install it to your Mautic instance.</p><h4>Using S/FTP</h4><ol class="container"><li>Upload the zip package to the <code>plugins</code> directory.</li><li>Unzip the package in the <code>plugins</code> directory.</li><li>Go to Plugins in the Mautic administration and click on the "Install/Update plugins" button.</li></ol><h4>Using command line</h4><p>Please modify the commands according to your login details and correct paths.</p><ol class="container"><li><code>scp ~/Downloads/StripeBundle.zip username@host:/var/www/yourmautic/plugins</code></li><li><code>ssh username@host:/var/www/yourmautic/plugins</code></li><li><code>unzip StripeBundle.zip</code></li><li><code>bin/console mautic:plugins:install</code></li></ol></div><p>Notice that 6 new segments were created after successful installation. You can delete those you don't want. Nothing bad will happen. If the incoming Stripe event won't find the specific event, it will simply store itself without adding the contact to the segment. You may have to delete the segments you don't want after every plugin update, though.</p><figure class="post__image"><img loading="lazy" src="https://chimpino.com/media/posts/4/Screenshot-2023-10-19-at-11.42.03.png" alt="" width="1970" height="588" sizes="100vw" srcset="https://chimpino.com/media/posts/4/responsive/Screenshot-2023-10-19-at-11.42.03-xs.png 300w, https://chimpino.com/media/posts/4/responsive/Screenshot-2023-10-19-at-11.42.03-sm.png 480w, https://chimpino.com/media/posts/4/responsive/Screenshot-2023-10-19-at-11.42.03-md.png 768w, https://chimpino.com/media/posts/4/responsive/Screenshot-2023-10-19-at-11.42.03-lg.png 1024w, https://chimpino.com/media/posts/4/responsive/Screenshot-2023-10-19-at-11.42.03-xl.png 1360w, https://chimpino.com/media/posts/4/responsive/Screenshot-2023-10-19-at-11.42.03-2xl.png 1600w"></figure><h3>Configuration</h3><p>Once the plugin is installed, go the plugins list. You should see the Stripe Plugin within your other plugins. Save your <a href="https://dashboard.stripe.com/test/apikeys">test</a> and <a href="https://dashboard.stripe.com/apikeys">production</a> Secret keys. The plugin allows you to switch between the two so you can click one button to go live.</p><h4>Magic Stripe segments</h4><p>The plugin is listening for these events:</p><ul class="container"><li>customer.created,</li><li>customer.updated,</li><li>customer.subscription.created,</li><li>customer.subscription.updated,</li><li>invoice.paid.</li></ul><p>Check the <a href="https://stripe.com/docs/api/events/types" target="_blank" rel="noopener noreferrer">Stripe docs</a> for more details.</p><h4>Webhook testing</h4><p>Go to the <a href="https://dashboard.stripe.com/test/dashboard" target="_blank" rel="noopener noreferrer">Stripe Dashboard</a>. Use the Test mode to test your workflows before you go live. It will allow you to make payments without actually transferring funds. Then click to Developer options and then to Webhook tab as you can see below.</p><figure class="post__image"><img loading="lazy" src="https://chimpino.com/media/posts/4/Screenshot-2023-09-19-at-10.19.10.png" alt="" width="2664" height="1456" sizes="100vw" srcset="https://chimpino.com/media/posts/4/responsive/Screenshot-2023-09-19-at-10.19.10-xs.png 300w, https://chimpino.com/media/posts/4/responsive/Screenshot-2023-09-19-at-10.19.10-sm.png 480w, https://chimpino.com/media/posts/4/responsive/Screenshot-2023-09-19-at-10.19.10-md.png 768w, https://chimpino.com/media/posts/4/responsive/Screenshot-2023-09-19-at-10.19.10-lg.png 1024w, https://chimpino.com/media/posts/4/responsive/Screenshot-2023-09-19-at-10.19.10-xl.png 1360w, https://chimpino.com/media/posts/4/responsive/Screenshot-2023-09-19-at-10.19.10-2xl.png 1600w"></figure><p>Add an endpoint. A new window will open for you.</p><p>Endpoint URL is the URL address where you have your Mautic instance and ends with <code><span style="color: #000000;">/stripe/webhook</span></code>.</p><p>For example: <code>https://my.mautic.com/stripe/webhook</code></p><p>You can describe what are you exactly testing. Choose Listen to option "Event on your account". Then what events should be listen to in the option:  Select events to listen to. New window will open, where you can choose what you want to listen to (<span style="color: var(--text-primary-color); font-family: var(--editor-font-family); font-size: inherit; font-weight: var(--font-weight-normal);">customer.created, </span><span style="color: var(--text-primary-color); font-family: var(--editor-font-family); font-size: inherit; font-weight: var(--font-weight-normal);">customer.updated, </span><span style="color: var(--text-primary-color); font-family: var(--editor-font-family); font-size: inherit; font-weight: var(--font-weight-normal);">customer.subscription.created, </span><span style="color: var(--text-primary-color); font-family: var(--editor-font-family); font-size: inherit; font-weight: var(--font-weight-normal);">customer.subscription.updated or </span><span style="color: var(--text-primary-color); font-family: var(--editor-font-family); font-size: inherit; font-weight: var(--font-weight-normal);">invoice.paid).</span></p><p> </p><figure class="post__image"><img loading="lazy" src="https://chimpino.com/media/posts/4/Screenshot-2023-10-23-at-13.15.32.png" alt="" width="455" height="531" sizes="100vw" srcset="https://chimpino.com/media/posts/4/responsive/Screenshot-2023-10-23-at-13.15.32-xs.png 300w, https://chimpino.com/media/posts/4/responsive/Screenshot-2023-10-23-at-13.15.32-sm.png 480w, https://chimpino.com/media/posts/4/responsive/Screenshot-2023-10-23-at-13.15.32-md.png 768w, https://chimpino.com/media/posts/4/responsive/Screenshot-2023-10-23-at-13.15.32-lg.png 1024w, https://chimpino.com/media/posts/4/responsive/Screenshot-2023-10-23-at-13.15.32-xl.png 1360w, https://chimpino.com/media/posts/4/responsive/Screenshot-2023-10-23-at-13.15.32-2xl.png 1600w"></figure><p>With this set up you can go to your Mautic instance and in the menu choose Components. There is Landing pages option. Create new Landing page and insert tokens to builder. You can embed a <strong><span style="color: #faa90f;">pricing table</span></strong> by inserting this token in to the builder.</p><h5><span style="color: #faa90f;">Pricing table token</span></h5><p>The token consists of 2 variable values: <code>tableid</code> and <code>key</code></p><p><code><span style="color: #2dc26b;">{</span><span style="color: #3598db;">stripe</span><span style="color: #e03e2d;">=</span>pricingtable <span style="color: #3598db;">tableid</span><span style="color: #e03e2d;">=</span>your_pricing_table_id <span style="color: #3598db;">key</span><span style="color: #e03e2d;">=</span>your_public_key<span style="color: #2dc26b;">}</span></code></p><p>Here is the example of pricing table token:</p><p><code><span style="color: #2dc26b;">{</span><span style="color: #3598db;">stripe</span><span style="color: #e03e2d;">=</span>pricingtable <span style="color: #3598db;">tableid</span><span style="color: #e03e2d;">=</span>prctbl_1NrOQADr6Bz0HFJp5rYMy0sv <span style="color: #3598db;">key</span><span style="color: #e03e2d;">=</span>pk_test_51NFhPoDe6Bz3jFroZhz2GfN3eY1754vIGBbJ1GyLhwW0SmTNqc08kfMXpLDGyy0Z4NCfsRzk4Hkp18XyKyrqk1CJ0povwXV0DC <span style="color: #2dc26b;">}</span></code></p><h6><span style="color: #3598db;">tableid</span></h6><p>Tableid part is unique for the pricing table. Click to More and choose option Product catalog in the Stripe app.</p><figure class="post__image"><img loading="lazy" src="https://chimpino.com/media/posts/4/Screenshot-2023-10-31-at-9.24.31.png" alt="" width="619" height="766" sizes="100vw" srcset="https://chimpino.com/media/posts/4/responsive/Screenshot-2023-10-31-at-9.24.31-xs.png 300w, https://chimpino.com/media/posts/4/responsive/Screenshot-2023-10-31-at-9.24.31-sm.png 480w, https://chimpino.com/media/posts/4/responsive/Screenshot-2023-10-31-at-9.24.31-md.png 768w, https://chimpino.com/media/posts/4/responsive/Screenshot-2023-10-31-at-9.24.31-lg.png 1024w, https://chimpino.com/media/posts/4/responsive/Screenshot-2023-10-31-at-9.24.31-xl.png 1360w, https://chimpino.com/media/posts/4/responsive/Screenshot-2023-10-31-at-9.24.31-2xl.png 1600w"></figure><p>If you do not have any products you have to create some products. Now you can open Pricing tables tab in the Product catalog section. If you already do not have pricing table, you have to create one. Then open the pricing table and there you can see the tableid in the HTML code below.</p><figure class="post__image"><img loading="lazy" src="https://chimpino.com/media/posts/4/Screenshot-2023-10-20-at-11.21.31-2.png" alt="" width="1774" height="632" sizes="100vw" srcset="https://chimpino.com/media/posts/4/responsive/Screenshot-2023-10-20-at-11.21.31-2-xs.png 300w, https://chimpino.com/media/posts/4/responsive/Screenshot-2023-10-20-at-11.21.31-2-sm.png 480w, https://chimpino.com/media/posts/4/responsive/Screenshot-2023-10-20-at-11.21.31-2-md.png 768w, https://chimpino.com/media/posts/4/responsive/Screenshot-2023-10-20-at-11.21.31-2-lg.png 1024w, https://chimpino.com/media/posts/4/responsive/Screenshot-2023-10-20-at-11.21.31-2-xl.png 1360w, https://chimpino.com/media/posts/4/responsive/Screenshot-2023-10-20-at-11.21.31-2-2xl.png 1600w"></figure><h6><span style="color: #e67e23;"><span style="color: #3598db;">key</span></span></h6><p>Key is your publishable key of your Stripe app. Go to Developer tab. Choose API keys and copy the Publishable Key. Or you can copy the publishable key from the definition of the pricing table as you can see in the picture above.</p><p>More about this price table process you can see in the <a href="https://stripe.com/docs/no-code/pricing-table" id="&quot;links">documentation</a>.</p><p>The<strong> <span style="color: #faa90f;">buy button</span></strong> token can be used in the builder to get your payment with.</p><h5><span style="color: #faa90f;">Buy Button token</span> </h5><p>The token consists of two variable values: <code>buttonid</code> and <code>key</code></p><p><code><span style="color: #2dc26b;">{</span><span style="color: #3598db;">stripe<span style="color: #e03e2d;">=</span></span>buybutton <span style="color: #3598db;">buttonid<span style="color: #e03e2d;">=</span></span>your_buy_button_id <span style="color: #3598db;">key<span style="color: #e03e2d;">=</span></span>your_public_key<span style="color: #2dc26b;">}</span></code></p><p>Here is the example of buy button token int the builder:</p><p><code><span style="color: #2dc26b;">{</span><span style="color: #3598db;">stripe</span><span style="color: #e03e2d;">=</span>buybutton <span style="color: #3598db;">buttonid</span><span style="color: #e03e2d;">=</span>buy_btn_1O2FuLDe6BP3HFJoDlpV9uIg <span style="color: #3598db;">key</span><span style="color: #e03e2d;">=</span>pk_test_51NFhPoDe6Bz3jFroZhz2GfN3eY1754vIGBbJ1GyLhwW0SmTNqc08kfMXpLDGyy0Z4NCfsRzk4Hkp18XyKyrqk1CJ0povwXV0DC <span style="color: #2dc26b;">}</span></code></p><h6><span style="color: #3598db;">buttonid</span></h6><p>Buttonid part is unique for the buy button. Go to Stripe app. Choose More and option Payment links. Make New, there you choose what product should be possible to buy through buy button and confirm it in the right side of the page. Then click to Buy Button as you can see below.</p><figure class="post__image"><img loading="lazy" src="https://chimpino.com/media/posts/4/Screenshot-2023-10-20-at-10.26.01-3.png" alt="" width="1621" height="306" sizes="100vw" srcset="https://chimpino.com/media/posts/4/responsive/Screenshot-2023-10-20-at-10.26.01-3-xs.png 300w, https://chimpino.com/media/posts/4/responsive/Screenshot-2023-10-20-at-10.26.01-3-sm.png 480w, https://chimpino.com/media/posts/4/responsive/Screenshot-2023-10-20-at-10.26.01-3-md.png 768w, https://chimpino.com/media/posts/4/responsive/Screenshot-2023-10-20-at-10.26.01-3-lg.png 1024w, https://chimpino.com/media/posts/4/responsive/Screenshot-2023-10-20-at-10.26.01-3-xl.png 1360w, https://chimpino.com/media/posts/4/responsive/Screenshot-2023-10-20-at-10.26.01-3-2xl.png 1600w"></figure><p>You can just copy the buy buttonid from the HTML code below.</p><figure class="post__image"><img loading="lazy" src="https://chimpino.com/media/posts/4/Screenshot-2023-10-20-at-10.28.35-2.png" alt="" width="1756" height="980" sizes="100vw" srcset="https://chimpino.com/media/posts/4/responsive/Screenshot-2023-10-20-at-10.28.35-2-xs.png 300w, https://chimpino.com/media/posts/4/responsive/Screenshot-2023-10-20-at-10.28.35-2-sm.png 480w, https://chimpino.com/media/posts/4/responsive/Screenshot-2023-10-20-at-10.28.35-2-md.png 768w, https://chimpino.com/media/posts/4/responsive/Screenshot-2023-10-20-at-10.28.35-2-lg.png 1024w, https://chimpino.com/media/posts/4/responsive/Screenshot-2023-10-20-at-10.28.35-2-xl.png 1360w, https://chimpino.com/media/posts/4/responsive/Screenshot-2023-10-20-at-10.28.35-2-2xl.png 1600w"></figure><h6><span style="color: #3598db;">key</span></h6><p>Key is your publishable key and it is the same as the key in the pricing tableGo to Developer tab. Choose API keys and copy the Publishable Key. Or you can copy the key from HTML code above in the buy button.</p><p>More about this buy button process you can see in the <a href="https://stripe.com/docs/payment-links/buy-button" id="links">documentation</a>.</p><h4>Signing</h4><p>you will need two keys <span style="color: #faa90f;">Secret key</span> and <span style="color: #faa90f;">Webhook secret key</span>.</p><p>Insert Secret key and Webhook secret key to the plugin in Mautic app (how to get Secret key or Webhook secret key, please read sections below). Switch the plugin to be enabled. Choose the mode to be used and you are ready to verify your caught events, that they are not fraud. </p><h5><span style="color: #faa90f;">Secret key</span></h5><p>Secret key is used to authenticate API request to Stripe. In the Stripe app you can get Test and Production Secret key depended on chosen mode.</p><p>Go to plugins list in Mautic app and open Stripe Plugin, where you can insert the Secret key from your Stripe app from Stripe app. Go to Developers section in Stripe app and to API keys tab to reveal your Secret key. Revealed Secret key depends on chosen mode (if you are in test mode you will see only testing Secret key and if you are in production mode you will only production Secret key).  Please note that the production Secret key can be revealed only once. If you loose it you will need to generate new one.</p><h5><span style="color: #faa90f;">Webhook secret key</span></h5><p>Webhook secret key is used to verify webhook (event) messages. </p><p>You can get test and production Webhook secret key in the Stripe app. Go to Stripe app to Developer section, there is Webhooks tab. Open your Hosted endpoints URL. You can see Signing secret part to be cevealed. Click to Reveal and you copy the Webhook secret key to Stripe Plugin set up in Mautic app.</p><figure class="post__image"><img loading="lazy" src="https://chimpino.com/media/posts/4/Screenshot-2023-10-25-at-10.50.30.png" alt="" width="1470" height="463" sizes="100vw" srcset="https://chimpino.com/media/posts/4/responsive/Screenshot-2023-10-25-at-10.50.30-xs.png 300w, https://chimpino.com/media/posts/4/responsive/Screenshot-2023-10-25-at-10.50.30-sm.png 480w, https://chimpino.com/media/posts/4/responsive/Screenshot-2023-10-25-at-10.50.30-md.png 768w, https://chimpino.com/media/posts/4/responsive/Screenshot-2023-10-25-at-10.50.30-lg.png 1024w, https://chimpino.com/media/posts/4/responsive/Screenshot-2023-10-25-at-10.50.30-xl.png 1360w, https://chimpino.com/media/posts/4/responsive/Screenshot-2023-10-25-at-10.50.30-2xl.png 1600w"></figure><h4>Campaign</h4><p>Make campaign in the main menu and use the special Stripe segments, Stripe Invoice Paid etc. For example send email with the invoice to the customer if customer buys your product and you receive webhook <code>invoice.paid</code>. </p><h4>Landing page</h4><p>If you wish to use Mautic landing pages to sell your products or services, go to Components &gt; Landing Pages in the main menu. Add new landing page and in the builder insert token which you want to use (Pricing table or Buy button). Save it and open through the URL.</p><figure class="post__image"><img loading="lazy" src="https://chimpino.com/media/posts/4/Screenshot-2023-10-23-at-13.34.57.png" alt="" width="2840" height="1132" sizes="100vw" srcset="https://chimpino.com/media/posts/4/responsive/Screenshot-2023-10-23-at-13.34.57-xs.png 300w, https://chimpino.com/media/posts/4/responsive/Screenshot-2023-10-23-at-13.34.57-sm.png 480w, https://chimpino.com/media/posts/4/responsive/Screenshot-2023-10-23-at-13.34.57-md.png 768w, https://chimpino.com/media/posts/4/responsive/Screenshot-2023-10-23-at-13.34.57-lg.png 1024w, https://chimpino.com/media/posts/4/responsive/Screenshot-2023-10-23-at-13.34.57-xl.png 1360w, https://chimpino.com/media/posts/4/responsive/Screenshot-2023-10-23-at-13.34.57-2xl.png 1600w"></figure><p>Landing page will open with the pricing table or buy button or both. You can "buy" subscription or use buy button virtually. Virtual payment can be made virtual card <a class="Link" href="https://stripe.com/docs/testing?testing-method=card-numbers#visa">4242 4242 4242 4242</a> with future expiration date (for example: 12/34) and fill the other informations as you want. <a href="https://stripe.com/docs/testing" id="links"></a>More about simulating payment is in the <a href="https://stripe.com/docs/testing" id="links">documentation</a>.</p><p><span style="color: var(--headings-color); font-family: var(--font-base); font-size: 1.60181em; font-weight: var(--font-weight-bold); letter-spacing: var(--letter-spacing);">FAQ</span></p><div class="container"><section id="faq" class="section"><div class="container pt-0"><h3>Why did you go with the subscription payment model over one time payment?</h3>We are going for a sustainable monetisation model. We want to evolve this plugin and add even more value to our members over time. See the Roadmap for what we plan. We are sure our members will appreciate that the plugin will get:<ul class="container"><li>new features</li><li>bug and security fixes</li><li>updates for new PHP and Mautic versions</li><li>support</li></ul></div><div class="container pt-0"><br>The subscription model will allow us to do that. As a software users ourselves we hate it when the maintainer of a software we use stops supporting it. We don't want it to happen to our customers.</div><div class="container pt-0"><h3>What if I don't want to pay for the plugin anymore?</h3>Of course you can cancel the subscription any time and get just one year of updates. There will be a link to where you can change subscription plans or cancel it completely any time in the payment confirmation email from Stripe.</div></section></div><div class="container text-center bottom-padding"><div class="about"> </div></div></div><footer class="wrapper post__footer"><div class="post__share"></div></footer></article><div class="post__comments"><div class="wrapper"></div></div></main><footer class="footer"><div class="footer__social"><a href="https://twitter.com/chimpinoteam" aria-label="Twitter"><svg><use xlink:href="https://chimpino.com/assets/svg/svg-map.svg#twitter"/></svg> </a><a href="https://www.linkedin.com/company/chimpinoteam" aria-label="LinkedIn"><svg><use xlink:href="https://chimpino.com/assets/svg/svg-map.svg#linkedin"/></svg> </a><a href="https://www.youtube.com/@chimpino" aria-label="Youtube"><svg><use xlink:href="https://chimpino.com/assets/svg/svg-map.svg#youtube"/></svg></a></div><div class="footer__copyright"><p>Powered by Publii</p></div><button onclick="backToTopFunction()" id="backToTop" class="footer__bttop" aria-label="Back to top" title="Back to top"><svg><use xlink:href="https://chimpino.com/assets/svg/svg-map.svg#toparrow"/></svg></button></footer></div><script defer="defer" src="https://chimpino.com/assets/js/scripts.min.js?v=f47c11534595205f20935f0db2a62a85"></script><script>window.publiiThemeMenuConfig={mobileMenuMode:'sidebar',animationSpeed:300,submenuWidth: 'auto',doubleClickTime:500,mobileMenuExpandableSubmenus:true,relatedContainerForOverlayMenuSelector:'.top'};</script><script>var images = document.querySelectorAll('img[loading]');
        for (var i = 0; i < images.length; i++) {
            if (images[i].complete) {
                images[i].classList.add('is-loaded');
            } else {
                images[i].addEventListener('load', function () {
                    this.classList.add('is-loaded');
                }, false);
            }
        }</script><div class="pcb" data-behaviour="badge" data-behaviour-link="#cookie-settings" data-revision="1" data-config-ttl="90" data-debug-mode="false"><div role="dialog" aria-modal="true" aria-hidden="true" aria-labelledby="pcb-title" aria-describedby="pcb-txt" class="pcb__banner"><div class="pcb__inner"><div id="pcb-title" role="heading" aria-level="2" class="pcb__title">This website uses cookies</div><div id="pcb-txt" class="pcb__txt">Select which cookies to opt-in to via the checkboxes below; our website uses cookies to examine site traffic and user activity while on our site, for marketing, and to provide social media functionality.</div><div class="pcb__buttons"><button type="button" class="pcb__btn pcb__btn--link pcb__btn--configure" aria-haspopup="dialog">Manage preferences</button> <button type="button" class="pcb__btn pcb__btn--solid pcb__btn--accept">Accept all</button></div></div></div><div class="pcb__popup" role="dialog" aria-modal="true" aria-hidden="true" aria-labelledby="pcb-popup-title"><div class="pcb__popup__wrapper"><div class="pcb__inner pcb__popup__inner"><div class="pcb__popup__heading"><div id="pcb-popup-title" role="heading" aria-level="2" class="pcb__title">Cookie settings</div><button class="pcb__popup__close" aria-label="Close"></button></div><div class="pcb__popup__content"><div class="pcb__txt pcb__popup__txt">We use cookies to enhance your browsing experience, serve personalized ads or content, and analyze our traffic. By clicking "Accept All", you consent to our use of cookies.</div><ul class="pcb__groups"><li class="pcb__group"><details><summary class="pcb__group__title no-desc">Required</summary></details><div class="pcb__popup__switch is-checked"><input type="checkbox" data-group-name="" id="pcb-group-0" checked="checked"> <label for="pcb-group-0">Required</label></div></li></ul></div><div class="pcb__buttons pcb__popup__buttons"><button type="button" class="pcb__btn pcb__btn--solid pcb__btn--accept">Accept all</button> <button type="button" class="pcb__btn pcb__btn--reject">Reject all</button> <button type="button" class="pcb__btn pcb__btn--save">Save settings</button></div></div></div></div><div class="pcb__overlay" aria-hidden="true"></div><button class="pcb__badge" aria-label="Cookie Policy" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" width="40" height="40" viewBox="0 0 23 23" fill="currentColor"><path d="M21.41 12.71c-.08-.01-.15 0-.22 0h-.03c-.03 0-.05 0-.08.01-.07 0-.13.01-.19.04-.52.21-1.44.19-2.02-.22-.44-.31-.65-.83-.62-1.53a.758.758 0 0 0-.27-.61.73.73 0 0 0-.65-.14c-1.98.51-3.49.23-4.26-.78-.82-1.08-.73-2.89.24-4.49.14-.23.14-.52 0-.75a.756.756 0 0 0-.67-.36c-.64.03-1.11-.1-1.31-.35-.19-.26-.13-.71-.01-1.29.04-.18.06-.38.03-.59-.05-.4-.4-.7-.81-.66C5.1 1.54 1 6.04 1 11.48 1 17.28 5.75 22 11.6 22c5.02 0 9.39-3.54 10.39-8.42.08-.4-.18-.78-.58-.87Zm-9.81 7.82c-5.03 0-9.12-4.06-9.12-9.06 0-4.34 3.05-8 7.25-8.86-.08.7.05 1.33.42 1.81.24.32.66.67 1.38.84-.76 1.86-.65 3.78.36 5.11.61.81 2.03 2 4.95 1.51.18.96.71 1.54 1.18 1.87.62.43 1.38.62 2.1.62.05 0 .09 0 .13-.01-1.23 3.64-4.7 6.18-8.64 6.18ZM13 17c0 .55-.45 1-1 1s-1-.45-1-1 .45-1 1-1 1 .45 1 1Zm5.29-12.3a.99.99 0 0 1-.29-.71c0-.55.45-.99 1-.99a1 1 0 0 1 .71.3c.19.19.29.44.29.71 0 .55-.45.99-1 .99a1 1 0 0 1-.71-.3ZM9 13.5c0 .83-.67 1.5-1.5 1.5S6 14.33 6 13.5 6.67 12 7.5 12s1.5.67 1.5 1.5Zm3.25.81a.744.744 0 0 1-.06-1.05c.28-.32.75-.34 1.05-.06.31.28.33.75.05 1.06-.15.16-.35.25-.56.25-.18 0-.36-.06-.5-.19ZM8.68 7.26c.41.37.44 1 .07 1.41-.2.22-.47.33-.75.33a.96.96 0 0 1-.67-.26c-.41-.37-.44-1-.07-1.41.37-.42 1-.45 1.41-.08Zm11.48 1.88c.18-.19.52-.19.7 0 .05.04.09.1.11.16.03.06.04.12.04.19 0 .13-.05.26-.15.35-.09.1-.22.15-.35.15s-.26-.05-.35-.15a.355.355 0 0 1-.11-.16.433.433 0 0 1-.04-.19c0-.13.05-.26.15-.35Zm-4.93-1.86a.75.75 0 1 1 1.059-1.06.75.75 0 0 1-1.059 1.06Z"/></svg></button></div><script>(function(win) {
    if (!document.querySelector('.pcb')) {
        return;
    }

    var cbConfig = {
        behaviour: document.querySelector('.pcb').getAttribute('data-behaviour'),
        behaviourLink: document.querySelector('.pcb').getAttribute('data-behaviour-link'),
        revision: document.querySelector('.pcb').getAttribute('data-revision'),
        configTTL: parseInt(document.querySelector('.pcb').getAttribute('data-config-ttl'), 10),
        debugMode: document.querySelector('.pcb').getAttribute('data-debug-mode') === 'true',
        initialState: null,
        previouslyAccepted: []
    };

    var cbUI = {
        wrapper: document.querySelector('.pcb'),
        banner: {
            element: null,
            btnAccept: null,
            btnReject: null,
            btnConfigure: null
        },
        popup: {
            element: null,
            btnClose: null,
            btnSave: null,
            btnAccept: null,
            btnReject: null,
            checkboxes: null,
        },
        overlay: null,
        badge: null,
        blockedScripts: document.querySelectorAll('script[type^="gdpr-blocker/"]'),
        triggerLinks: cbConfig.behaviourLink ? document.querySelectorAll('a[href*="' + cbConfig.behaviourLink + '"]') : null
    };

    function initUI () {
        // setup banner elements
        cbUI.banner.element = cbUI.wrapper.querySelector('.pcb__banner');
        cbUI.banner.btnAccept = cbUI.banner.element.querySelector('.pcb__btn--accept');
        cbUI.banner.btnReject = cbUI.banner.element.querySelector('.pcb__btn--reject');
        cbUI.banner.btnConfigure = cbUI.banner.element.querySelector('.pcb__btn--configure');

        // setup popup elements
        if (cbUI.wrapper.querySelector('.pcb__popup')) {
            cbUI.popup.element = cbUI.wrapper.querySelector('.pcb__popup');
            cbUI.popup.btnClose = cbUI.wrapper.querySelector('.pcb__popup__close');
            cbUI.popup.btnSave = cbUI.popup.element.querySelector('.pcb__btn--save');
            cbUI.popup.btnAccept = cbUI.popup.element.querySelector('.pcb__btn--accept');
            cbUI.popup.btnReject = cbUI.popup.element.querySelector('.pcb__btn--reject');
            cbUI.popup.checkboxes = cbUI.popup.element.querySelector('input[type="checkbox"]');
            // setup overlay
            cbUI.overlay = cbUI.wrapper.querySelector('.pcb__overlay');
        }

        cbUI.badge = cbUI.wrapper.querySelector('.pcb__badge');

        if (cbConfig.behaviour.indexOf('link') > -1) {
            for (var i = 0; i < cbUI.triggerLinks.length; i++) {
                cbUI.triggerLinks[i].addEventListener('click', function(e) {
                    e.preventDefault();
                    showBannerOrPopup();
                });
            }
        }
    }

    function initState () {
        var lsKeyName = getConfigName();
        var currentConfig = localStorage.getItem(lsKeyName);
        var configIsFresh = checkIfConfigIsFresh();

        if (!configIsFresh || currentConfig === null) {
            if (cbConfig.debugMode) {
                console.log('🍪 Config not found, or configuration expired');
            }

            showBanner();
        } else if (typeof currentConfig === 'string') {
            if (cbConfig.debugMode) {
                console.log('🍪 Config founded');
            }

            showBadge();

            if (cbUI.popup.element) {
                var allowedGroups = currentConfig.split(',');
                var checkedCheckboxes = cbUI.popup.element.querySelectorAll('input[type="checkbox"]:checked');

                for (var j = 0; j < checkedCheckboxes.length; j++) {
                    var name = checkedCheckboxes[j].getAttribute('data-group-name');

                    if (name && name !== '-' && allowedGroups.indexOf(name) === -1) {
                        checkedCheckboxes[j].checked = false;
                    }
                }

                for (var i = 0; i < allowedGroups.length; i++) {
                    var checkbox = cbUI.popup.element.querySelector('input[type="checkbox"][data-group-name="' + allowedGroups[i] + '"]');

                    if (checkbox) {
                        checkbox.checked = true;
                    }

                    allowCookieGroup(allowedGroups[i]);
                }
            }
        }

        setTimeout(function () {
            cbConfig.initialState = getInitialStateOfConsents();
        }, 0);
    }

    function checkIfConfigIsFresh () {
        var lastConfigSave = localStorage.getItem('publii-gdpr-cookies-config-save-date');

        if (lastConfigSave === null) {
            return false;
        }

        lastConfigSave = parseInt(lastConfigSave, 10);

        if (lastConfigSave === 0) {
            return true;
        }

        if (+new Date() - lastConfigSave < cbConfig.configTTL * 24 * 60 * 60 * 1000) {
            return true;
        }

        return false;
    }

    function initBannerEvents () {
        cbUI.banner.btnAccept.addEventListener('click', function (e) {
            e.preventDefault();
            acceptAllCookies('banner');
            showBadge();
        }, false);

        if (cbUI.banner.btnReject) {
            cbUI.banner.btnReject.addEventListener('click', function (e) {
                e.preventDefault();
                rejectAllCookies();
                showBadge();
            }, false);
        }

        if (cbUI.banner.btnConfigure) {
            cbUI.banner.btnConfigure.addEventListener('click', function (e) {
                e.preventDefault();
                hideBanner();
                showAdvancedPopup();
                showBadge();
            }, false);
        }
    }

    function initPopupEvents () {
        if (!cbUI.popup.element) {
            return;
        }

        cbUI.overlay.addEventListener('click', function (e) {
            hideAdvancedPopup();
        }, false);

        cbUI.popup.element.addEventListener('click', function (e) {
            e.stopPropagation();
        }, false);

        cbUI.popup.btnAccept.addEventListener('click', function (e) {
            e.preventDefault();
            acceptAllCookies('popup');
        }, false);

        cbUI.popup.btnReject.addEventListener('click', function (e) {
            e.preventDefault();
            rejectAllCookies();
        }, false);

        cbUI.popup.btnSave.addEventListener('click', function (e) {
            e.preventDefault();
            saveConfiguration();
        }, false);

        cbUI.popup.btnClose.addEventListener('click', function (e) {
            e.preventDefault();
            hideAdvancedPopup();
        }, false);
    }

    function initBadgeEvents () {
        if (!cbUI.badge) {
            return;
        }

        cbUI.badge.addEventListener('click', function (e) {
            showBannerOrPopup();
        }, false);
    }

    initUI();
    initState();
    initBannerEvents();
    initPopupEvents();
    initBadgeEvents();

    /**
     * API
     */
    function addScript (src, inline) {
        var newScript = document.createElement('script');

        if (src) {
            newScript.setAttribute('src', src);
        }

        if (inline) {
            newScript.text = inline;
        }

        document.body.appendChild(newScript);
    }

    function allowCookieGroup (allowedGroup) {
        var scripts = document.querySelectorAll('script[type="gdpr-blocker/' + allowedGroup + '"]');
        cbConfig.previouslyAccepted.push(allowedGroup);
    
        for (var j = 0; j < scripts.length; j++) {
            addScript(scripts[j].src, scripts[j].text);
        }

        var groupEvent = new Event('publii-cookie-banner-unblock-' + allowedGroup);
        document.body.dispatchEvent(groupEvent);
        unlockEmbeds(allowedGroup);

        if (cbConfig.debugMode) {
            console.log('🍪 Allowed group: ' + allowedGroup);
        }
    }

    function showBannerOrPopup () {
        if (cbUI.popup.element) {
            showAdvancedPopup();
        } else {
            showBanner();
        }
    }

    function showAdvancedPopup () {
        cbUI.popup.element.classList.add('is-visible');
        cbUI.overlay.classList.add('is-visible');
        cbUI.popup.element.setAttribute('aria-hidden', 'false');
        cbUI.overlay.setAttribute('aria-hidden', 'false');
    }

    function hideAdvancedPopup () {
        cbUI.popup.element.classList.remove('is-visible');
        cbUI.overlay.classList.remove('is-visible');
        cbUI.popup.element.setAttribute('aria-hidden', 'true');
        cbUI.overlay.setAttribute('aria-hidden', 'true');
    }

    function showBanner () {
        cbUI.banner.element.classList.add('is-visible');
        cbUI.banner.element.setAttribute('aria-hidden', 'false');
    }

    function hideBanner () {
        cbUI.banner.element.classList.remove('is-visible');
        cbUI.banner.element.setAttribute('aria-hidden', 'true');
    }

    function showBadge () {
        if (!cbUI.badge) {
            return;
        }

        cbUI.badge.classList.add('is-visible');
        cbUI.badge.setAttribute('aria-hidden', 'false');
    }

    function getConfigName () {
        var lsKeyName = 'publii-gdpr-allowed-cookies';

        if (cbConfig.revision) {
            lsKeyName = lsKeyName + '-v' + parseInt(cbConfig.revision, 10);
        }

        return lsKeyName;
    }

    function storeConfiguration (allowedGroups) {
        var lsKeyName = getConfigName();
        var dataToStore = allowedGroups.join(',');
        localStorage.setItem(lsKeyName, dataToStore);

        if (cbConfig.configTTL === 0) {
            localStorage.setItem('publii-gdpr-cookies-config-save-date', 0);

            if (cbConfig.debugMode) {
                console.log('🍪 Store never expiring configuration');
            }
        } else {
            localStorage.setItem('publii-gdpr-cookies-config-save-date', +new Date());
        }
    }

    function getInitialStateOfConsents () {
        if (!cbUI.popup.element) {
            return [];
        }

        var checkedGroups = cbUI.popup.element.querySelectorAll('input[type="checkbox"]:checked');
        var groups = [];

        for (var i = 0; i < checkedGroups.length; i++) {
            var allowedGroup = checkedGroups[i].getAttribute('data-group-name');

            if (allowedGroup !== '') {
                groups.push(allowedGroup);
            }
        }

        if (cbConfig.debugMode) {
            console.log('🍪 Initial state: ' + groups.join(', '));
        }

        return groups;
    }

    function getCurrentStateOfConsents () {
        if (!cbUI.popup.element) {
            return [];
        }

        var checkedGroups = cbUI.popup.element.querySelectorAll('input[type="checkbox"]:checked');
        var groups = [];

        for (var i = 0; i < checkedGroups.length; i++) {
            var allowedGroup = checkedGroups[i].getAttribute('data-group-name');

            if (allowedGroup !== '') {
                groups.push(allowedGroup);
            }
        }

        if (cbConfig.debugMode) {
            console.log('🍪 State to save: ' + groups.join(', '));
        }

        return groups;
    }

    function getAllGroups () {
        if (!cbUI.popup.element) {
            return [];
        }

        var checkedGroups = cbUI.popup.element.querySelectorAll('input[type="checkbox"]');
        var groups = [];

        for (var i = 0; i < checkedGroups.length; i++) {
            var allowedGroup = checkedGroups[i].getAttribute('data-group-name');

            if (allowedGroup !== '') {
                groups.push(allowedGroup);
            }
        }

        return groups;
    }

    function acceptAllCookies (source) {
        var groupsToAccept = getAllGroups();
        storeConfiguration(groupsToAccept);

        for (var i = 0; i < groupsToAccept.length; i++) {
            var group = groupsToAccept[i];

            if (cbConfig.initialState.indexOf(group) > -1 || cbConfig.previouslyAccepted.indexOf(group) > -1) {
                if (cbConfig.debugMode) {
                    console.log('🍪 Skip previously activated group: ' + group);
                }

                continue;
            }

            allowCookieGroup(group);
        }

        if (cbUI.popup.element) {
            var checkboxesToCheck = cbUI.popup.element.querySelectorAll('input[type="checkbox"]');

            for (var j = 0; j < checkboxesToCheck.length; j++) {
                checkboxesToCheck[j].checked = true;
            }
        }

        if (cbConfig.debugMode) {
            console.log('🍪 Accept all cookies: ', groupsToAccept.join(', '));
        }

        if (source === 'popup') {
            hideAdvancedPopup();
        } else if (source === 'banner') {
            hideBanner();
        }
    }

    function rejectAllCookies () {
        if (cbConfig.debugMode) {
            console.log('🍪 Reject all cookies');
        }

        storeConfiguration([]);
        setTimeout(function () {
            window.location.reload();
        }, 100);
    }

    function saveConfiguration () {
        var groupsToAccept = getCurrentStateOfConsents();
        storeConfiguration(groupsToAccept);

        if (cbConfig.debugMode) {
            console.log('🍪 Save new config: ', groupsToAccept.join(', '));
        }

        if (reloadIsNeeded(groupsToAccept)) {
            setTimeout(function () {
                window.location.reload();
            }, 100);
            return;
        }

        for (var i = 0; i < groupsToAccept.length; i++) {
            var group = groupsToAccept[i];

            if (cbConfig.initialState.indexOf(group) > -1 || cbConfig.previouslyAccepted.indexOf(group) > -1) {
                if (cbConfig.debugMode) {
                    console.log('🍪 Skip previously activated group: ' + group);
                }

                continue;
            }

            allowCookieGroup(group);
        }

        hideAdvancedPopup();
    }

    function reloadIsNeeded (groupsToAccept) {
        // check if user rejected consent for initial groups
        var initialGroups = cbConfig.initialState;
        var previouslyAcceptedGroups = cbConfig.previouslyAccepted;
        var groupsToCheck = initialGroups.concat(previouslyAcceptedGroups);

        for (var i = 0; i < groupsToCheck.length; i++) {
            var groupToCheck = groupsToCheck[i];

            if (groupsToAccept.indexOf(groupToCheck) === -1) {
                if (cbConfig.debugMode) {
                    console.log('🍪 Reload is needed due lack of: ', groupToCheck);
                }

                return true;
            }
        }

        return false;
    }

    function unlockEmbeds (cookieGroup) {
        var iframesToUnlock = document.querySelectorAll('.pec-wrapper[data-consent-group-id="' + cookieGroup + '"]');

        for (var i = 0; i < iframesToUnlock.length; i++) {
            var iframeWrapper = iframesToUnlock[i];
            iframeWrapper.querySelector('.pec-overlay').classList.remove('is-active');
            iframeWrapper.querySelector('.pec-overlay').setAttribute('aria-hidden', 'true');
            var iframe = iframeWrapper.querySelector('iframe');
            iframe.setAttribute('src', iframe.getAttribute('data-consent-src'));
        }
    }

    win.publiiEmbedConsentGiven = function (cookieGroup) {
        // it will unlock embeds
        allowCookieGroup(cookieGroup);

        var checkbox = cbUI.popup.element.querySelector('input[type="checkbox"][data-group-name="' + cookieGroup + '"]');

        if (checkbox) {
            checkbox.checked = true;
        }

        var groupsToAccept = getCurrentStateOfConsents();
        storeConfiguration(groupsToAccept);

        if (cbConfig.debugMode) {
            console.log('🍪 Save new config: ', groupsToAccept.join(', '));
        }
    }
})(window);</script></body></html>